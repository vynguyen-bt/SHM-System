<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>xeokit BIM Viewer</title>
    <link rel="stylesheet" href="./lib/fontawesome-free-5.11.2-web/css/all.min.css" type="text/css" />
    <link rel="stylesheet" href="./dist/xeokit-bim-viewer.css" type="text/css" />
    <link rel="stylesheet" href="./css/style.css" />
</head>

<body>

    <div id="myViewer">
        <canvas id="myCanvas"></canvas>
        <canvas id="myNavCubeCanvas"></canvas>
    </div>



</body>

<!-- Tooltips libraries -->
<script src="./lib/popper.js"></script>
<script src="./lib/tippy.js"></script>

    <!-- IFC parsing library -->
    <script src="./dist/web-ifc.js"></script>

<script type="module">

                import { Viewer, WebIFCLoaderPlugin, NavCubePlugin } from "./dist/xeokit-sdk.es.js";





    window.onload = function () {



        //------------------------------------------------------------------------------------------------------------------
        // 1. Create a Viewer, arrange the camera
        //------------------------------------------------------------------------------------------------------------------

        const viewer = new Viewer({
            canvasId: "myCanvas",
            transparent: true
        });

        viewer.camera.eye = [-2.56, 8.38, 8.27];
        viewer.camera.look = [4.4, 3.7, 4.4];
        viewer.camera.up = [0.1, 0.9, -0.09];

        //------------------------------------------------------------------------------------------------------------------
        // 2. Create a NavCube
        //------------------------------------------------------------------------------------------------------------------

        new NavCubePlugin(viewer, {
            canvasId: "myNavCubeCanvas",
            visible: true,
            size: 250,
            alignment: "bottomRight",
            bottomMargin: 100,
            rightMargin: 10
        });

        //------------------------------------------------------------------------------------------------------------------
        // 3. Load a model from an .ifc file
        //------------------------------------------------------------------------------------------------------------------

        const ifcLoader = new WebIFCLoaderPlugin(viewer, {
            wasmPath: "./dist/",
            webIFC: WebIFC // Pass the global WebIFC object
        });

        const model = ifcLoader.load({
            id: "myModel",
            src: "/models/PhuDien_NTVY/PHUDIEN - NTVY.ifc",
            edges: true
        });

        model.on("loaded", () => {
            console.log("Model loaded!");
        });

        model.on("error", (e) => {
            console.error("Error loading model: " + e);
        });

        window.viewer = viewer; // For debugging

    }

</script>

</html>